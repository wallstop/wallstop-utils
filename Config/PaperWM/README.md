# PaperWM Configuration

This directory contains backup files for [PaperWM](https://github.com/paperwm/PaperWM), a tiling window manager extension for GNOME Shell.

## What is PaperWM?

PaperWM is a GNOME Shell extension that provides a scrollable tiling window manager. It arranges windows in a horizontal strip, allowing you to navigate through them like pages in a document. Key features include:

- **Scrollable tiling**: Windows are arranged horizontally and can be scrolled through
- **Scratch layer**: Float windows above the tiling layer (similar to a scratchpad)
- **Multi-monitor support**: Works across multiple displays
- **Keyboard-driven**: Extensive keyboard shortcuts for window management
- **Customizable**: Configurable gaps, margins, and styles

## Configuration Files

| File | Description |
|------|-------------|
| `paperwm-dconf.conf` | dconf settings export (keybindings, margins, window rules, etc.) |
| `user.css` | Custom CSS styles for PaperWM UI elements |

## Important Notes

### Workspace UUIDs in dconf Backup

The `paperwm-dconf.conf` file contains machine-specific workspace UUIDs that are automatically generated by GNOME. When restoring to a different system:

- The UUIDs in the backup will not match the new system's workspaces
- This **won't cause errors** — settings will simply apply to the original UUIDs which may not exist
- **Workspace-specific settings** (like per-workspace window rules) may need to be reconfigured manually
- General settings (keybindings, gaps, margins) will work correctly

### About user.css

The shipped `user.css` is a **template/example file** with commented-out default styles. It is not an active customization — the commented styles show the available options you can modify.

To customize PaperWM's appearance:
1. Review the commented examples in `user.css`
2. Uncomment and modify the styles you want to change
3. Add your own custom CSS rules as needed

## Checking Your Environment

To check your installed versions:

```bash
# Check GNOME Shell version
gnome-shell --version

# Check PaperWM version
gnome-extensions show paperwm@paperwm.github.com | grep -i version
```

## Installation

### From GNOME Extensions Website (Recommended)

1. Visit [PaperWM on extensions.gnome.org](https://extensions.gnome.org/extension/6099/paperwm/)
2. Toggle the switch to install
3. Grant permissions when prompted

### From GitHub (Latest Development Version)

```bash
# Clone the repository
git clone https://github.com/paperwm/PaperWM.git ~/.local/share/gnome-shell/extensions/paperwm@paperwm.github.com

# Enable the extension
gnome-extensions enable paperwm@paperwm.github.com
```

## Backup and Restore Scripts

### Location

Scripts are located in `Scripts/PaperWM/`:

- `PaperWMBackup.sh` - Backs up current PaperWM configuration
- `PaperWMRestore.sh` - Restores PaperWM configuration from backup

### Usage

**Backup current configuration:**

```bash
./Scripts/PaperWM/PaperWMBackup.sh
```

**Restore configuration:**

```bash
# Restore everything (dconf settings + user.css)
./Scripts/PaperWM/PaperWMRestore.sh

# Restore only dconf settings
./Scripts/PaperWM/PaperWMRestore.sh --dconf-only

# Restore only user.css
./Scripts/PaperWM/PaperWMRestore.sh --css-only
```

### Applying Changes

After restoring, you need to reload PaperWM:

1. Open **GNOME Extensions** app
2. Toggle PaperWM **OFF** then **ON** again

Or log out and log back in.

## Manual Backup/Restore Commands

### dconf Settings

**Backup:**

```bash
dconf dump /org/gnome/shell/extensions/paperwm/ > paperwm-dconf.conf
```

**Restore:**

```bash
dconf load /org/gnome/shell/extensions/paperwm/ < paperwm-dconf.conf
```

**Reset to defaults:**

```bash
dconf reset -f /org/gnome/shell/extensions/paperwm/
```

### user.css

**Backup:**

```bash
cp ~/.config/paperwm/user.css ./user.css
```

**Restore:**

```bash
mkdir -p ~/.config/paperwm
cp ./user.css ~/.config/paperwm/user.css
```

## Configuration Locations

| Type | Location |
|------|----------|
| dconf settings | `/org/gnome/shell/extensions/paperwm/` (in dconf database) |
| Custom CSS | `~/.config/paperwm/user.css` |
| Extension files | `~/.local/share/gnome-shell/extensions/paperwm@paperwm.github.com/` |

## Note About user.js Deprecation

**Important**: Starting with GNOME 45, PaperWM no longer uses `~/.config/paperwm/user.js` for configuration.

### GNOME 44 and Earlier

- Configuration was stored in `~/.config/paperwm/user.js`
- JavaScript file with settings object

### GNOME 45 and Later (Current)

- Configuration is stored in **dconf** at `/org/gnome/shell/extensions/paperwm/`
- Can be edited via:
  - GNOME Extensions app → PaperWM settings
  - `dconf-editor` GUI tool
  - `dconf` CLI commands
  - `gsettings` commands

If you have an old `user.js` file, it is no longer used and can be safely removed after migrating your settings.

## Useful Commands

```bash
# Open PaperWM settings
gnome-extensions prefs paperwm@paperwm.github.com

# Check PaperWM status
gnome-extensions show paperwm@paperwm.github.com

# View all PaperWM dconf settings
dconf dump /org/gnome/shell/extensions/paperwm/

# Edit settings with dconf-editor (GUI)
dconf-editor /org/gnome/shell/extensions/paperwm/
```

## Troubleshooting

### Extension Not Loading

```bash
# Check GNOME Shell logs
journalctl -f -o cat /usr/bin/gnome-shell
```

### Settings Not Applying

1. Disable and re-enable the extension
2. If that doesn't work, log out and log back in
3. For CSS changes, only disable/enable is needed (no logout required)

### Reset Everything

```bash
# Reset all PaperWM settings to defaults
dconf reset -f /org/gnome/shell/extensions/paperwm/

# Remove custom CSS
rm ~/.config/paperwm/user.css
```
